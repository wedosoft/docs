---
sidebar_position: 9
---

# 플랫폼 재해복구 및 백업

Freshservice 플랫폼의 비즈니스 연속성을 보장하기 위한 종합적인 재해복구 및 백업 전략을 제시합니다. 예상치 못한 장애 상황에서도 신속한 복구와 데이터 보호를 통해 서비스 중단을 최소화하고 조직의 업무 연속성을 확보합니다.

:::info 재해복구 핵심 요소
- RTO/RPO 목표: 비즈니스 요구사항에 맞는 복구 시간 및 데이터 손실 허용 범위 설정
- 다층 백업 전략: 로컬, 원격, 클라우드를 활용한 3-2-1 백업 규칙 적용
- 정기적 복구 테스트: 실제 재해 상황을 가정한 주기적 복구 훈련 실시
- 24/7 모니터링: 시스템 상태를 지속적으로 감시하고 이상 징후 조기 탐지
:::

## 재해복구 계획 수립

### 비즈니스 영향 분석 (BIA)

#### 업무 중요도 분류
```yaml
중요도분류:
  Mission_Critical:
    시스템: "티켓 관리, 사용자 인증"
    RTO: "15분"
    RPO: "5분"
    영향도: "전사 업무 중단"
    복구우선순위: "1순위"
  
  Business_Important:
    시스템: "보고서, 분석, 워크플로우"
    RTO: "2시간"
    RPO: "30분"
    영향도: "업무 효율성 저하"
    복구우선순위: "2순위"
  
  Business_Useful:
    시스템: "지식베이스, 설정 관리"
    RTO: "24시간"
    RPO: "4시간"
    영향도: "일부 기능 제한"
    복구우선순위: "3순위"
```

#### 재해 유형별 영향 분석
```javascript
const disasterImpactAnalysis = {
    하드웨어장애: {
        발생확률: "중간",
        영향범위: "특정 시스템",
        복구시간: "2-8시간",
        비용영향: "중간",
        대응전략: "하드웨어 이중화, 신속 교체"
    },
    
    소프트웨어장애: {
        발생확률: "높음",
        영향범위: "서비스 전체",
        복구시간: "30분-4시간",
        비용영향: "낮음",
        대응전략: "롤백, 패치, 재시작"
    },
    
    네트워크장애: {
        발생확률: "중간",
        영향범위: "연결성",
        복구시간: "1-6시간",
        비용영향: "높음",
        대응전략: "이중화 회선, 백업 ISP"
    },
    
    자연재해: {
        발생확률: "낮음",
        영향범위: "전체 인프라",
        복구시간: "24-72시간",
        비용영향: "매우높음",
        대응전략: "지리적 분산, 클라우드 DR"
    }
};
```

### 재해복구 전략

#### DR 아키텍처 설계
```yaml
DR아키텍처:
  운영환경:
    위치: "주 데이터센터 (서울)"
    구성: "Active-Active 클러스터"
    용량: "100% 운영 부하"
    
  재해복구환경:
    위치: "DR 사이트 (부산) + 클라우드 (AWS 서울)"
    구성: "Hot Standby + Cold Standby"
    용량: "80% 운영 부하 (Hot), 50% (Cold)"
    
  백업저장소:
    로컬백업: "주 데이터센터 NAS"
    원격백업: "DR 사이트 스토리지"
    클라우드백업: "AWS S3 + Glacier"
```

#### 복구 시나리오별 전략
```mermaid
시나리오1: 부분장애 → 로컬복구 → 서비스복원
시나리오2: 주사이트장애 → DR사이트전환 → 운영이관
시나리오3: 전체장애 → 클라우드복구 → 임시운영
```

**시나리오 1: 부분 장애 (Component Failure)**
```yaml
부분장애대응:
  감지:
    모니터링: "실시간 헬스체크"
    알림: "즉시 SMS/이메일"
    에스컬레이션: "15분 내 담당자 연락"
  
  대응:
    자동복구: "로드밸런서 트래픽 재라우팅"
    수동복구: "장애 컴포넌트 재시작/교체"
    백업활성화: "예비 시스템 즉시 투입"
  
  복구절차:
    - 장애 컴포넌트 격리
    - 트래픽 우회 설정
    - 서비스 정상성 확인
    - 근본 원인 분석
```

**시나리오 2: 주 사이트 장애 (Site Failure)**
```yaml
주사이트장애대응:
  판단기준:
    - 주 데이터센터 완전 접근 불가
    - 복구 예상 시간 > RTO
    - 안전상 위험 요소 존재
  
  DR전환절차:
    1단계: "DR 사이트 시스템 활성화 (5분)"
    2단계: "최신 백업 데이터 복원 (15분)"
    3단계: "DNS 전환 및 트래픽 리다이렉션 (5분)"
    4단계: "서비스 기능 검증 (10분)"
    5단계: "사용자 공지 및 서비스 재개 (5분)"
  
  총예상시간: "40분 (RTO 내)"
```

## 백업 전략 및 복원 절차

### 백업 정책 및 일정

#### 3-2-1 백업 규칙 적용
```yaml
백업규칙_321:
  3개의백업본:
    - 운영 데이터 (Primary)
    - 로컬 백업 (Local NAS)  
    - 원격 백업 (DR Site)
    - 클라우드 백업 (AWS S3)
  
  2가지매체:
    - 온프레미스 스토리지
    - 클라우드 스토리지
  
  1개오프사이트:
    - 지리적으로 분리된 위치
    - 재해로부터 안전한 보관
```

#### 백업 일정 및 보존 정책
```yaml
백업스케줄:
  실시간백업:
    대상: "트랜잭션 로그"
    주기: "연속 복제"
    보존기간: "7일"
    
  일일백업:
    대상: "전체 데이터베이스"
    시간: "매일 02:00 AM"
    보존기간: "30일"
    
  주간백업:
    대상: "전체 시스템 + 설정"
    시간: "매주 일요일 01:00 AM"
    보존기간: "12주"
    
  월간백업:
    대상: "완전 시스템 이미지"
    시간: "매월 첫째 일요일"
    보존기간: "12개월"
    
  연간백업:
    대상: "연도별 아카이브"
    시간: "매년 1월 1일"
    보존기간: "7년 (법정 보존)"
```

### 백업 시스템 구성

#### 계층별 백업 전략
```javascript
const backupArchitecture = {
    Tier1_실시간백업: {
        기술: "데이터베이스 복제",
        위치: "동일 데이터센터",
        RPO: "< 1분",
        용도: "즉시 페일오버"
    },
    
    Tier2_로컬백업: {
        기술: "스냅샷 + 증분 백업",
        위치: "로컬 NAS",
        RPO: "< 1시간",
        용도: "빠른 복구"
    },
    
    Tier3_원격백업: {
        기술: "네트워크 복제",
        위치: "DR 사이트",
        RPO: "< 4시간", 
        용도: "사이트 장애 대응"
    },
    
    Tier4_클라우드백업: {
        기술: "클라우드 동기화",
        위치: "AWS/Azure",
        RPO: "< 24시간",
        용도: "재해 복구"
    }
};
```

#### 백업 자동화 스크립트
```bash
#!/bin/bash
# Freshservice 플랫폼 백업 자동화 스크립트

# 설정 변수
BACKUP_DATE=$(date +%Y%m%d_%H%M%S)
BACKUP_DIR="/backup/freshservice"
DB_NAME="freshservice_prod"
RETENTION_DAYS=30

# 1. 데이터베이스 백업
echo "Starting database backup..."
mysqldump --single-transaction --routines --triggers \
  $DB_NAME > $BACKUP_DIR/db_backup_$BACKUP_DATE.sql

# 2. 파일 시스템 백업
echo "Starting file system backup..."
tar -czf $BACKUP_DIR/files_backup_$BACKUP_DATE.tar.gz \
  /opt/freshservice/uploads \
  /opt/freshservice/config \
  /opt/freshservice/logs

# 3. 백업 검증
echo "Verifying backup integrity..."
if [ -f "$BACKUP_DIR/db_backup_$BACKUP_DATE.sql" ] && \
   [ -f "$BACKUP_DIR/files_backup_$BACKUP_DATE.tar.gz" ]; then
    echo "Backup completed successfully"
    
    # 4. 원격 백업 동기화
    rsync -avz $BACKUP_DIR/ backup-server:/backup/freshservice/
    
    # 5. 클라우드 업로드
    aws s3 sync $BACKUP_DIR/ s3://freshservice-backup/$BACKUP_DATE/
else
    echo "Backup failed!" | mail -s "Backup Alert" admin@company.com
    exit 1
fi

# 6. 오래된 백업 정리
find $BACKUP_DIR -type f -mtime +$RETENTION_DAYS -delete

echo "Backup process completed at $(date)"
```

### 복원 절차

#### 복원 시나리오별 절차

**시나리오 A: 데이터 손상 복구**
```sql
-- 1. 손상 범위 확인
SELECT TABLE_NAME, TABLE_ROWS, 
       CREATE_TIME, UPDATE_TIME
FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_SCHEMA = 'freshservice_prod'
ORDER BY UPDATE_TIME DESC;

-- 2. 특정 시점 복구 (Point-in-Time Recovery)
-- 손상 발생 직전 시점으로 복구
RESTORE DATABASE freshservice_prod 
FROM DISK = '/backup/db_backup_20240115_020000.sql'
WITH STOPAT = '2024-01-15 14:30:00';

-- 3. 트랜잭션 로그 적용
-- 손상 시점까지의 트랜잭션 재적용
RESTORE LOG freshservice_prod 
FROM DISK = '/backup/log_backup_20240115_143000.trn'
WITH STOPAT = '2024-01-15 14:30:00';
```

**시나리오 B: 전체 시스템 복구**
```yaml
전체시스템복구절차:
  1단계_환경준비:
    - 하드웨어 점검 및 교체
    - 운영체제 재설치
    - 네트워크 연결 확인
    
  2단계_기본시스템복구:
    - 시스템 이미지 복원
    - 기본 설정 적용
    - 서비스 데몬 설정
    
  3단계_데이터복구:
    - 데이터베이스 복원
    - 파일 시스템 복원
    - 설정 파일 복원
    
  4단계_서비스검증:
    - 기능 테스트 수행
    - 성능 확인
    - 사용자 검증
    
  5단계_서비스재개:
    - DNS 전환
    - 사용자 공지
    - 모니터링 재개
```

## 비즈니스 연속성 관리

### 비즈니스 연속성 계획 (BCP)

#### 비즈니스 프로세스 우선순위
```yaml
프로세스우선순위:
  최우선_Tier1:
    - 사용자 인증 및 접근
    - 긴급 티켓 생성 및 처리
    - 중요 알림 및 에스컬레이션
    복구목표: "15분 내"
  
  중요_Tier2:
    - 일반 티켓 관리
    - 워크플로우 자동화
    - 기본 보고서
    복구목표: "2시간 내"
  
  일반_Tier3:
    - 지식베이스 관리
    - 고급 분석
    - 사용자 교육
    복구목표: "24시간 내"
```

#### 대체 운영 절차
```yaml
대체운영절차:
  IT서비스데스크:
    일반상황: "Freshservice 플랫폼 사용"
    장애상황: 
      - 임시: "이메일 + 스프레드시트"
      - 단기: "백업 시스템 활성화"
      - 장기: "대체 플랫폼 임시 도입"
  
  의사소통채널:
    일반상황: "플랫폼 내 알림 시스템"
    장애상황:
      - 즉시: "SMS, 전화, 이메일"
      - 지속: "팀즈, 슬랙 등 메신저"
      - 공식: "회사 공지사항"
```

### 비상 대응 체계

#### 인시던트 대응 팀 구성
```yaml
비상대응조직:
  인시던트사령부:
    역할: "전체 상황 총괄 지휘"
    구성: "CIO, IT팀장, 보안팀장"
    위치: "전용 상황실"
    
  기술대응팀:
    역할: "기술적 복구 작업"
    구성: "시스템엔지니어, DBA, 네트워크엔지니어"
    위치: "기술센터"
    
  비즈니스연속성팀:
    역할: "업무 연속성 보장"
    구성: "업무팀장, 프로세스오너"
    위치: "각 부서"
    
  커뮤니케이션팀:
    역할: "내외부 소통 관리"
    구성: "PR팀, HR팀, 고객서비스팀"
    위치: "커뮤니케이션센터"
```

#### 비상 연락망
```javascript
const emergencyContacts = {
    Tier1_즉시연락: {
        "IT팀장": "+82-10-1234-5678",
        "시스템관리자": "+82-10-2345-6789", 
        "보안책임자": "+82-10-3456-7890"
    },
    
    Tier2_30분내연락: {
        "CIO": "+82-10-4567-8901",
        "운영팀장": "+82-10-5678-9012",
        "네트워크관리자": "+82-10-6789-0123"
    },
    
    외부업체: {
        "Freshservice_Support": "+1-866-832-3090",
        "AWS_Support": "+82-2-1588-8000",
        "ISP_Emergency": "+82-2-100-1234"
    }
};
```

## 장애 시나리오 및 대응

### 주요 장애 시나리오

#### 시나리오 1: 데이터베이스 서버 장애
```yaml
데이터베이스장애:
  증상:
    - 데이터베이스 연결 실패
    - 응답 시간 급격한 증가
    - 사용자 로그인 불가
  
  즉시대응:
    1분이내:
      - 자동 페일오버 시스템 활성화
      - 읽기 복제본으로 트래픽 전환
      - 모니터링 대시보드 확인
    
    5분이내:
      - 장애 원인 분석 시작
      - 백업 데이터베이스 준비
      - 이해관계자 알림 발송
    
    15분이내:
      - 백업 시스템으로 완전 전환
      - 기본 서비스 기능 확인
      - 사용자 공지사항 발송
```

#### 시나리오 2: 웹 서버 클러스터 장애
```yaml
웹서버장애:
  증상:
    - 웹 페이지 접근 불가
    - 503 Service Unavailable 오류
    - 로드밸런서 경고 알림
  
  대응절차:
    자동대응:
      - 로드밸런서가 정상 서버로 트래픽 재분배
      - 오토스케일링으로 새 인스턴스 생성
      - 헬스체크 실패 서버 자동 격리
    
    수동대응:
      - 장애 서버 로그 분석
      - 필요시 수동 재시작
      - 근본 원인 해결 후 서비스 복구
```

### 복구 후 검증 절차

#### 기능 검증 체크리스트
```yaml
복구검증절차:
  1단계_기본기능:
    - 사용자 로그인 ✓
    - 메인 대시보드 로딩 ✓
    - 기본 네비게이션 ✓
    
  2단계_핵심기능:
    - 티켓 생성/조회/수정 ✓
    - 워크플로우 실행 ✓
    - 알림 발송 ✓
    
  3단계_고급기능:
    - 보고서 생성 ✓
    - 분석 기능 ✓
    - 통합 시스템 연동 ✓
    
  4단계_성능검증:
    - 응답 시간 측정 ✓
    - 동시 사용자 부하 테스트 ✓
    - 메모리/CPU 사용률 확인 ✓
```

## 실무 활용 예시

### 상황 1: 자연재해로 인한 주 데이터센터 완전 손실
**목표**: 72시간 내 DR 사이트에서 전체 서비스 복구
**방법**: 
1. **즉시 대응**: DR 사이트 Hot Standby 시스템 활성화 (30분)
2. **데이터 복구**: 최근 백업으로부터 데이터 복원 (4시간)
3. **서비스 전환**: DNS 변경 및 트래픽 리다이렉션 (2시간)
4. **기능 검증**: 전체 기능 테스트 및 성능 확인 (8시간)

**결과**: 14.5시간 만에 95% 기능 복구, 48시간 내 100% 정상화

### 상황 2: 랜섬웨어 공격으로 인한 데이터 암호화
**목표**: 암호화 이전 상태로 완전 복구 및 보안 강화
**방법**: 
1. **즉시 격리**: 감염 시스템 네트워크 차단 및 격리 (즉시)
2. **백업 복구**: 암호화 이전 시점의 백업으로 복원 (6시간)
3. **보안 강화**: 모든 시스템 보안 패치 및 설정 강화 (12시간)
4. **검증 및 재개**: 보안 검수 후 단계적 서비스 재개 (24시간)

**결과**: 데이터 손실 없이 완전 복구, 보안 수준 대폭 향상

:::success 재해복구 체계 구축 완료
체계적인 재해복구 계획을 통해 어떤 상황에서도 비즈니스 연속성을 보장할 수 있습니다
:::

## 정기 훈련 및 개선

### DR 훈련 프로그램

#### 연간 훈련 계획
```yaml
DR훈련계획:
  분기별테스트:
    - 백업 복원 테스트
    - 페일오버 시뮬레이션
    - 비상 연락망 점검
    
  반기별훈련:
    - 전체 DR 시나리오 훈련
    - 부서별 BCP 실행 훈련
    - 복구 시간 측정 및 개선
    
  연간종합훈련:
    - 실제 상황과 동일한 대규모 훈련
    - 외부 업체 포함 통합 훈련
    - 경영진 참여 의사결정 훈련
```

### 지속적 개선

#### 개선 사이클
```mermaid
계획 → 실행 → 평가 → 개선 → 계획
```

이러한 종합적인 재해복구 및 백업 전략을 통해 조직은 Freshservice 플랫폼의 안정성과 비즈니스 연속성을 확보할 수 있습니다.