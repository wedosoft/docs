---
sidebar_position: 4
---

# 커스텀 객체 룩업

커스텀 객체 룩업을 사용하면 다른 폼에서 커스텀 객체의 데이터를 참조하고 선택할 수 있습니다. 이를 통해 데이터의 일관성을 유지하고 사용자가 쉽게 관련 정보를 선택할 수 있습니다.

:::info 룩업 필드의 이해
룩업 필드는 다른 데이터 소스(자산, 커스텀 객체 등)의 레코드를 참조하는 필드입니다. 내부적으로는 참조된 레코드의 ID를 저장합니다.
:::

## 룩업 필드 생성

:::tip 룩업 활용 방법
룩업 필드를 사용하면 사용자가 기존 데이터를 쉽게 선택할 수 있어 입력 오류를 줄이고 데이터 일관성을 유지할 수 있습니다.
:::

### 기본 설정

1. **폼 디자이너 접근**
   - Admin → 티켓 필드 → 커스텀 필드 생성
   - 또는 서비스 카탈로그 → 서비스 요청 폼 편집

2. **룩업 필드 추가**
   - 필드 유형: **룩업**
   - 데이터 소스: **커스텀 객체** 선택
   - 참조할 커스텀 객체 선택

3. **표시 설정**
   - 표시 필드: 사용자에게 보여질 필드 선택
   - 검색 가능 필드: 검색할 수 있는 필드 설정

##### 서비스 요청 폼 설정

```markdown
**자산 요청 서비스**

1. 요청 유형: [선택 필드]
   - 신규 자산 요청
   - 자산 교체 요청  
   - 자산 수리 요청

2. 자산 선택: [커스텀 객체 룩업]
   - 데이터 소스: IT 자산 커스텀 객체
   - 표시 필드: 자산명, 카테고리, 위치
   - 검색 필드: 자산명, 자산 ID

3. 요청 사유: [텍스트 영역]
```

#### 프로젝트 커스텀 객체

| 프로젝트 ID | 프로젝트명 | 부서 | PM | 상태 |
|-------------|------------|------|-----|------|
| PRJ001 | 스마트홈 플랫폼 | IoT사업부 | 김프로 | 진행중 |
| PRJ002 | AI 세탁기 개발 | 생활가전사업부 | 이매니저 | 완료 |
| PRJ003 | 배터리 기술 연구 | 에너지솔루션 | 박연구원 | 계획중 |

#### 변경 요청 폼에서 활용

```markdown
**프로젝트 변경 요청**

1. 대상 프로젝트: [커스텀 객체 룩업]
   - 데이터 소스: 프로젝트 커스텀 객체
   - 표시 필드: 프로젝트명, 부서, PM
   - 필터 조건: 상태  = "진행중"

2. 변경 유형: [선택 필드]
   - 일정 변경
   - 예산 변경
   - 범위 변경
   - 인력 변경

3. 변경 사유: [텍스트 영역]
```

##### 구매 요청 폼

```markdown
**구매 요청서**

1. 공급업체: [커스텀 객체 룩업]
   - 데이터 소스: 공급업체 커스텀 객체
   - 표시 필드: 공급업체명, 카테고리, 지역
   - 종속 필드: 담당 구매팀 (자동 설정)

2. 품목 정보: [텍스트]

3. 수량: [숫자]

4. 희망 납기: [날짜]
```

## 고급 룩업 설정

### 종속 룩업 (Dependent Lookups)

한 룩업 필드의 선택에 따라 다른 필드가 자동으로 설정되는 기능입니다.

#### 조건부 룩업

특정 조건에 따라 다른 데이터를 보여주는 룩업입니다.

#### 예시: 요청 유형에 따른 승인자 선택

```javascript
// 의사 코드
if (요청유형 == "예산관련") &#123;
  승인자_룩업.데이터소스  = "재무팀_커스텀객체";
&#125; else if (요청유형 == "인사관련") &#123;
  승인자_룩업.데이터소스  = "인사팀_커스텀객체";
&#125;
```

## 워크플로에서 룩업 활용

### Reader Node와 룩업 연동

워크플로에서 룩업 필드의 값을 사용하여 관련 데이터를 조회할 수 있습니다.

#### 설정 방법

1. **Reader Node 추가**
   - Read From: 해당 커스텀 객체 선택

2. **필터 설정**
   - Filter By: Record ID 선택
   - 값: 룩업 필드 변수 매핑

3. **액션에서 사용**
   - Reader 출력: `R1.담당자이메일`
   - 알림 전송 시 사용

### 예시: 자산 요청 시 담당자에게 자동 알림

```markdown
**워크플로 시나리오**

1. 트리거: 자산 요청 티켓 생성
2. Reader Node: 선택된 자산의 담당자 정보 조회
3. 액션: 담당자에게 이메일 알림 전송

**설정**
- Reader ID: R1
- Filter: Record ID  = &#123;&#123;ticket.자산룩업필드&#125;&#125;
- 알림 대상: &#123;&#123;R1.담당자이메일&#125;&#125;
```

## 베스트 프랙티스

#### 성능 최적화

1. **인덱싱**
   - 자주 검색되는 필드에 인덱스 설정
   - 검색 성능 향상을 위한 필드 최적화

2. **데이터 정리**
   - 비활성 레코드 정기적 정리
   - 중복 데이터 제거

3. **캐싱**
   - 자주 사용되는 룩업 데이터 캐싱
   - 응답 시간 단축

## 문제 해결

### 일반적인 문제와 해결책

**Q: 룩업 필드에 데이터가 표시되지 않습니다**
A: 
- 커스텀 객체에 레코드가 있는지 확인
- 표시 필드가 올바르게 설정되었는지 확인
- 필터 조건이 너무 제한적이지 않은지 확인

**Q: 종속 룩업이 작동하지 않습니다**
A:
- 상위 필드와 하위 필드의 관계가 올바르게 설정되었는지 확인
- 커스텀 객체의 관계 필드가 정확한지 확인

**Q: 워크플로에서 룩업 값을 읽을 수 없습니다**
A:
- Reader Node의 Filter By에서 Record ID를 사용했는지 확인
- 룩업 필드가 올바른 변수명으로 참조되었는지 확인

### 디버깅 팁

1. **Preview 기능 활용**
   - Reader Node의 Preview Results로 올바른 데이터가 조회되는지 확인

2. **로그 확인**
   - 워크플로 실행 로그에서 오류 메시지 확인

3. **단계별 테스트**
   - 각 룩업 단계별로 개별 테스트 수행

## 관련 문서

- [커스텀 객체 생성하기](creating-custom-objects.mdx)
- [워크플로에서 커스텀 객체 활용하기](using-custom-objects-in-workflows.md)
- [커스텀 객체 가져오기/내보내기](importing-and-exporting-custom-objects.md)