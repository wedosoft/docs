---
sidebar_position: 2
---

# 인시던트 탐지 및 로깅

인시던트의 신속한 탐지와 체계적인 로깅은 효과적인 인시던트 관리의 첫 번째 단계로, 서비스 중단 시간을 최소화하고 비즈니스 연속성을 확보하는 핵심 프로세스입니다.

:::info 인시던트 탐지 시스템 구축 전 필수 확인사항
- **모니터링 범위**: 모든 핵심 시스템과 서비스에 대한 포괄적 모니터링 체계 구축 필요
- **알림 채널**: 다중 채널 알림 시스템으로 단일 장애점(SPOF) 방지 필수
- **24/7 대응**: 업무 시간 외에도 즉시 대응 가능한 온콜 체계 구축 권장
- **false positive 최소화**: 불필요한 알림을 줄이기 위한 임계값 튜닝 필요
:::

## 인시던트 탐지 방법론

### 1. 자동 탐지 시스템

모니터링 도구를 통한 자동 인시던트 탐지는 인적 오류를 줄이고 대응 시간을 단축시키는 핵심 방법입니다.

**주요 탐지 유형**:

| 탐지 유형 | 모니터링 대상 | 임계값 예시 | 대응 시간 |
|-----------|---------------|-------------|-----------|
| **시스템 성능** | CPU, 메모리, 디스크 | CPU 85% 이상 5분 지속 | 즉시 |
| **네트워크 상태** | 패킷 손실, 지연시간 | 패킷 손실 5% 이상 | 즉시 |
| **애플리케이션** | 응답시간, 오류율 | 응답시간 3초 초과 | 즉시 |
| **서비스 가용성** | HTTP 상태, 포트 연결 | 5분간 연결 실패 | 즉시 |

**자동 탐지 도구 설정**:
```yaml
모니터링 스택 예시:
Infrastructure:
  - Nagios/Zabbix: 시스템 리소스 모니터링
  - PRTG: 네트워크 성능 모니터링
  - SolarWinds: 통합 인프라 관리

Application:
  - New Relic/Dynatrace: APM 솔루션
  - Pingdom/UptimeRobot: 웹 서비스 가용성
  - ELK Stack: 로그 분석 및 이상 탐지
```

### 2. 사용자 신고 기반 탐지

사용자로부터의 직접 신고는 모니터링 도구가 감지하지 못한 문제를 파악하는 중요한 채널입니다.

**신고 채널별 특성**:

1. **헬프데스크 티켓**
   - 가장 일반적인 신고 방법
   - 체계적인 정보 수집 가능
   - 추적 및 관리 용이

2. **전화 신고**
   - 긴급 상황 시 즉시 대응
   - 실시간 커뮤니케이션 가능
   - 상세 정보 즉시 확인

3. **이메일 신고**
   - 상세한 설명과 첨부파일 전송 가능
   - 자동 티켓 생성 연동
   - 비동기 처리 적합

:::warning 사용자 신고 처리 시 주의사항
- **중복 신고 확인**: 동일 이슈에 대한 여러 신고 통합 처리 필요
- **신고자 피드백**: 접수 확인 및 진행 상황 주기적 업데이트 필수
- **우선순위 판단**: 사용자 체감과 실제 영향도 차이 고려 필요
:::

### 3. 정기 점검을 통한 탐지

예방적 인시던트 탐지를 위한 정기 점검 체계를 운영합니다.

**점검 유형별 주기**:
- **시스템 헬스 체크**: 일 1회
- **백업 상태 확인**: 일 1회
- **보안 스캔**: 주 1회
- **성능 분석**: 주 1회
- **용량 계획 검토**: 월 1회

## 인시던트 로깅 표준

### 기본 로깅 체계

모든 인시던트는 다음 표준에 따라 체계적으로 기록되어야 합니다.

**필수 기록 항목**:
```markdown
인시던트 기본 정보:
✅ 발견 일시 및 방법
✅ 최초 신고자 정보
✅ 영향받는 시스템/서비스
✅ 증상 및 오류 메시지
✅ 임시 해결방안 적용 여부

비즈니스 영향 정보:
✅ 영향받는 사용자 수
✅ 중단된 비즈니스 프로세스
✅ 예상 손실 규모
✅ 고객 영향도 평가
```

### 인시던트 분류 체계

체계적인 분류를 통해 유사 사례 검색과 트렌드 분석을 용이하게 합니다.

**1차 분류 (시스템별)**:
- **인프라**: 서버, 네트워크, 스토리지
- **애플리케이션**: 웹서비스, 데이터베이스, 미들웨어
- **보안**: 침해사고, 접근 제어, 인증
- **사용자**: 계정, 권한, 클라이언트 소프트웨어

**2차 분류 (증상별)**:
- **성능 저하**: 응답 지연, 처리량 감소
- **기능 오류**: 특정 기능 작동 불가
- **완전 중단**: 서비스 전체 이용 불가
- **데이터 이슈**: 정합성 오류, 손실

:::tip 효과적인 로깅 모범사례
**상세 기록의 중요성**:
- 스크린샷과 로그 파일 첨부로 정확한 상황 기록
- 시간대별 상황 변화 추적 기록
- 시도한 해결방법과 결과 상세 기록
- 관련 시스템 간 의존성 정보 포함
:::

## 초기 대응 체크리스트

### 인시던트 접수 시 즉시 수행사항

**1단계: 즉시 확인 (5분 이내)**
1. **인시던트 범위 파악**
   - 영향받는 시스템 식별
   - 사용자 영향 범위 추정
   - 비즈니스 프로세스 중단 여부 확인

2. **초기 분류 및 우선순위 설정**
   - P1-P4 우선순위 매트릭스 적용
   - 에스컬레이션 필요성 판단
   - 담당팀 및 담당자 지정

3. **커뮤니케이션 시작**
   - 신고자에게 접수 확인 통보
   - 관련 팀 및 관리자에게 알림
   - 상황실 또는 브리지 개설 검토

**2단계: 상세 조사 (15분 이내)**
1. **정보 수집 및 검증**
   - 추가 정보 요청 및 수집
   - 유사 이전 사례 검색
   - 모니터링 데이터 분석

2. **임시 조치 검토**
   - 워크어라운드 가능성 평가
   - 서비스 우회 방안 검토
   - 긴급 복구 절차 준비

## 실무 활용 예시

### 상황 1: 웹서버 응답 지연 자동 탐지

**목표**: 웹서버 성능 저하를 자동으로 탐지하고 즉시 대응 체계 가동

**방법**:
1. **자동 탐지 설정**
   - 응답시간 3초 초과 시 경고 알림
   - 5초 초과 시 심각 알림 및 자동 티켓 생성
   - 연속 5회 실패 시 주요 인시던트로 분류

2. **즉시 대응 절차**
   - 웹서버 로드밸런서 상태 확인
   - 데이터베이스 연결 및 쿼리 성능 점검
   - CDN 및 네트워크 경로 상태 확인

**결과**: 평균 탐지 시간 2분, 초기 대응 시간 5분 달성

### 상황 2: 사용자 집단 장애 신고 처리

**목표**: 다수 사용자의 동시 신고를 효율적으로 처리하여 중복 작업 방지

**방법**:
1. **신고 접수 및 통합**
   - 최초 신고를 마스터 티켓으로 설정
   - 후속 신고들을 마스터 티켓에 연결
   - 신고자별 개별 응답 및 상황 업데이트

2. **패턴 분석 및 원인 파악**
   - 신고 시간대별 분포 분석
   - 영향받는 사용자 그룹의 공통점 파악
   - 네트워크, 시스템, 애플리케이션 순차 점검

**결과**: 중복 작업 85% 감소, 전체 해결 시간 40% 단축

### 상황 3: 정기 점검 중 이상 징후 발견

**목표**: 정기 헬스 체크에서 발견된 이상 징후를 사전에 대응하여 장애 예방

**방법**:
1. **이상 징후 분석**
   - 디스크 사용률 지속적 증가 패턴 발견
   - 메모리 누수 의심 징후 확인
   - 네트워크 트래픽 이상 패턴 감지

2. **예방적 조치 실행**
   - 예정된 점검 시간에 사전 조치 실행
   - 관련 팀과 사전 협의 후 조치 계획 수립
   - 모니터링 강화 및 임계값 조정

**결과**: 잠재적 장애 80% 사전 방지, 예방 정비를 통한 안정성 향상

## 자동화 및 통합 관리

### 모니터링 도구 연동

**Freshservice와의 통합 방법**:

1. **API 기반 자동 티켓 생성**
   ```json
   POST /api/v2/tickets
   {
     "subject": "[자동생성] 웹서버 응답 지연 감지",
     "description": "모니터링 시스템에서 웹서버 응답시간 5초 초과 감지",
     "status": 2,
     "priority": 2,
     "source": 7,
     "category": "Hardware"
   }
   ```

2. **Webhook을 통한 실시간 연동**
   - 모니터링 알림 → Freshservice 웹훅 → 자동 티켓 생성
   - 인시던트 상태 변경 → 모니터링 시스템 주석 업데이트
   - 해결 완료 → 모니터링 알림 음소거 설정

:::success 모니터링 통합 효과
모니터링 도구와 Freshservice 연동 시 평균 인시던트 탐지 시간 90% 단축, 수동 입력 오류 95% 감소
:::

### 알림 체계 최적화

**다중 채널 알림 전략**:
- **1차 알림**: 이메일 + SMS
- **2차 알림**: 전화 + 메신저 (5분 후 미응답 시)
- **3차 알림**: 에스컬레이션 (15분 후 미응답 시)

**알림 피로도 방지**:
- 동일 이슈 중복 알림 차단
- 시간대별 알림 강도 조절
- 팀별 로테이션 스케줄 적용

## 성과 측정 및 개선

### 탐지 성능 지표

| 지표명 | 목표 수치 | 측정 방법 | 현재 달성도 |
|--------|-----------|-----------|-------------|
| **평균 탐지 시간** | < 5분 | 장애 발생 ~ 최초 탐지 | 3.2분 |
| **False Positive 비율** | < 10% | 잘못된 알림 / 전체 알림 | 8.5% |
| **자동 탐지 비율** | > 80% | 자동 탐지 / 전체 탐지 | 75% |
| **중복 신고 통합율** | > 90% | 통합 처리 / 중복 신고 | 88% |

### 지속적 개선 프로세스

**월간 검토 항목**:
1. **탐지 누락 사례 분석**
   - 모니터링 사각지대 식별
   - 임계값 조정 필요성 검토
   - 새로운 모니터링 포인트 추가

2. **False Positive 최소화**
   - 불필요한 알림 패턴 분석
   - 임계값 및 조건 최적화
   - 지능형 알림 필터링 적용

## 문제 해결 가이드

### 자주 발생하는 문제들

#### 문제: 모니터링 알림이 Freshservice 티켓으로 생성되지 않음

**원인**: API 연동 설정 오류 또는 네트워크 연결 문제

**해결**:
1. **API 연결 상태 확인**
   - API 키 유효성 검증
   - 네트워크 연결 및 방화벽 설정 점검
   - Freshservice API 엔드포인트 접근성 테스트

2. **연동 설정 재구성**
   - 웹훅 URL 및 인증 정보 재설정
   - 테스트 알림 발송으로 연동 동작 확인
   - 로그 파일에서 오류 메시지 분석

#### 문제: 중요한 인시던트가 낮은 우선순위로 분류됨

**원인**: 자동 분류 규칙의 불완전성 또는 비즈니스 영향 평가 기준 부족

**해결**:
1. **분류 규칙 개선**
   - 비즈니스 크리티컬 키워드 추가
   - 시스템별 중요도 가중치 적용
   - 시간대별 영향도 차등 적용

2. **수동 검토 프로세스 강화**
   - 모든 P3 이하 인시던트의 1차 검토 의무화
   - 비즈니스 임팩트 재평가 체크포인트 설정

:::warning 탐지 및 로깅 시 주의사항
- **개인정보 보호**: 로그에 민감 정보 포함 시 마스킹 처리 필수
- **저장 기간 준수**: 규정에 따른 로그 보관 기간 및 삭제 정책 적용
- **접근 권한 관리**: 인시던트 정보 접근 권한을 최소 필요 인원으로 제한
:::

## 관련 기능 및 연계

인시던트 탐지 및 로깅과 연계되는 핵심 프로세스들:

- **[인시던트 분류 및 우선순위](./incident-classification-prioritization/)**: 탐지된 인시던트의 체계적 분류
- **[인시던트 조사 및 진단](./incident-investigation-diagnosis/)**: 로깅된 정보를 기반으로 한 상세 분석
- **[인시던트 커뮤니케이션](./incident-communication-updates/)**: 탐지 즉시 시작되는 이해관계자 소통
- **[주요 인시던트 관리](./major-incident-management/)**: 중대한 인시던트 탐지 시 특별 프로세스